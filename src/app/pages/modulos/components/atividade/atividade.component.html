<div class="header-atividade">
  <div class="container-links">
    <div class="header-links">
      <!-- Imagem do ícone de download do ebook -->
      <img
        src="assets/icons/clipboard.svg"
        alt="Icone para download do ebook"
        width="28px"
        height="28px"
      />
      <p>Atividade</p>
    </div>
  </div>
  <!-- ícone que quando clicado volta para a página geral da unidade -->
  <img
    (click)="atividadeClick.emit()"
    src="assets/icons/close.svg"
    alt="Icone para ir para a atividade da unidade"
    width="30px"
    height="30px"
  />
</div>

<div
  class="container-atividade"
  *ngIf="this.ltiService.dados_completos?.userTopico?.[this.idTopico]?.UsuarioTopicos[0].encerrado == false; else elseAtividade"
>
  <div *ngIf="questao">
    <h3>{{ questao.questao }}</h3>

    <div *ngFor="let alternativa of questao.Alternativas; let i = index">
      <div
        class="alternativas"
        (click)="!respostaEnviada && responder(alternativa.descricao)"
      >
        <p class="options">{{ vetorLetras[i] }}</p>
        <div class="container-textos">
          <div class="texto-cima">
            <p>{{ alternativa.descricao }}</p>
          </div>
          <div
            class="texto-baixo"
            *ngIf="resposta === alternativa.descricao"
            [ngClass]="{
              respostaErrada: this.questao.respostaCorreta !== respostaEnviada,
              respostaCorreta: this.questao.respostaCorreta === respostaEnviada
            }"
          >
            <p>{{ resposta ? getExplicacao(resposta) : "" }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <button
    *ngIf="this.respostaEnviada == true"
    (click)="refazer()"
    [disabled]="respostaCorretaEnviada"
  >
    Refazer
  </button>
</div>

<ng-template #elseAtividade>
  <div class="container-atividade">
    <div *ngIf="questao">
      <h3>{{ questao.questao }}</h3>
      <div *ngFor="let alternativa of questao.Alternativas; let i = index">
        <div
          class="alternativas"
          (click)="responderAlternativo(alternativa.descricao)"
        >
          <div
            class="container-prefix"
            [ngStyle]="{
              'background-color':
                (resposta === alternativa.descricao &&
                  alternativa.correta == true) ||
                (resposta === alternativa.descricao &&
                  alternativa.correta == true) ||
                alternativa.correta == true
                  ? '#58DB43'
                  : resposta === alternativa.descricao &&
                    alternativa.correta == false
                  ? 'red'
                  : null
            }"
          >
            <p
              *ngIf="
                resposta != alternativa.descricao &&
                alternativa.correta != true &&
                this.abre == null
              "
              class="options"
              [ngClass]="{
                respostaCorreta:
                  resposta === alternativa.descricao && this.abre == false
              }"
            >
              {{ vetorLetras[i] }}
            </p>

            <p
              *ngIf="resposta != alternativa.descricao && this.abre != null"
              class="options"
            >
              {{ vetorLetras[i] }}
            </p>

            <img
              class="img img-correta"
              *ngIf="
                resposta === alternativa.descricao &&
                alternativa.correta == true
              "
              src="../../../../../assets/img/checkAtividade.png"
              alt=""
            />
            <img
              class="img img-correta"
              *ngIf="
                this.abre == null &&
                alternativa.correta == true
              "
              src="../../../../../assets/img/checkAtividade.png"
              alt=""
            />
            <img
              class="img img-errada"
              *ngIf="
                resposta === alternativa.descricao &&
                alternativa.correta == false
              "
              src="../../../../../assets/img/erradoAtividade.png"
              alt=""
            />
          </div>
          <div class="container-textos">
            <div class="texto-cima">
              <p>{{ alternativa.descricao }}</p>
              <mat-icon
                (click)="clickOlho()"
                [ngStyle]="{
                  color:
                    resposta === alternativa.descricao && this.abre == true
                      ? '#A174E2'
                      : this.abre == false
                      ? 'white'
                      : null
                }"
                >remove_red_eye</mat-icon
              >
            </div>
            <div
              class="texto-baixo"
              *ngIf="resposta === alternativa.descricao && this.abre == true"
              [ngClass]="{
                respostaErrada: this.questao.respostaCorreta != resposta,
                respostaCorreta: this.questao.respostaCorreta == resposta
              }"
            >
              <p>{{ resposta ? getExplicacao(resposta) : "" }}</p>
            </div>
            <div
              class="texto-baixo"
              *ngIf="
                alternativa.descricao != null &&
                alternativa.correta == true &&
                this.abre == null
              "
              [ngClass]="{
                respostaCorreta:
                  alternativa.descricao != null &&
                  alternativa.correta == true &&
                  this.abre == null
              }"
            >
              <p>{{ alternativa.explicacao }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
